import{r as P,o as O,a as b,b as B,c as w,u as $,w as k,g as e,d as v,e as h,f as X,h as C,i as D,U as R,s as y,j as E,k as S,l as V,m as z,n as T,p as F,q as L,F as M,_ as N}from"./RIBstFtf.js";function U(){const c=P({x:-2e3,y:-2e3}),r=P({x:0,y:0}),i={x:-2e3,y:-2e3};let u=0;const s=B(o=>{const{clientX:t,clientY:f}=o,p=Date.now(),m=p-u,a=o.clientX-i.x,n=o.clientY-i.y;i.x=c.x,i.y=c.y,c.x=t,c.y=f,r.x,r.y,r.x=a/m,r.y=n/m,u=p});return O(()=>{document.addEventListener("mousemove",s,{passive:!0})}),b(()=>{document.removeEventListener("mousemove",s,{passive:!0})}),{position:c,velocity:r}}const Y={class:"absolute inset-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j={ref:"circle",cx:"12",cy:"12",r:"12"},I={__name:"LoadingCursor",setup(c,{expose:r}){r({on:m,off:a});const i=w(!1),u=w(null),s=w(null),o=$(u,{svg:"svg",circle:"circle"});k(i,n=>{n?s.value=k(t.position,f):s.value&&(s.value(),s.value=null)});const t=U();function f(){o.root.style.transform=`translate3d(${t.position.x}px, ${t.position.y}px, 0)`}function p(){e.killTweensOf(o.svg),e.killTweensOf(o.circle)}function m(){p(),i.value=!0,f(),e.fromTo(o.circle,{"--p":0},{duration:1.2,ease:"power3.out","--p":1}),e.fromTo(o.svg,{rotate:0},{duration:1.2,ease:"power2",rotate:360})}function a(){p();const n=e.to(o.circle,{duration:1,ease:"power2.out","--p":0,immediateRender:!0});e.to(o.svg,{duration:1,ease:"power2.out",rotate:"+=360",immediateRender:!0}),n.then(()=>i.value=!1)}return(n,d)=>(v(),h("div",{ref_key:"root",ref:u,class:"_loading-cursor",inert:""},[(v(),h("svg",Y,[X("circle",j,null,512)]))],512))}};function x(c){return new Promise(r=>{try{c.then(()=>r())}catch{r()}})}const q=["inert"],A=X("div",{class:"progress absolute w-full left-0 bottom-0"},null,-1),W=[A],H={__name:"PageTransition",setup(c){const r=C(),i=D(),u=w(null),s=$(u,{progress:".progress"}),o=w(null),t=P({active:!1,from:null,to:null});O(()=>{window.$pageTransition={in:f,out:p}});function f(a){e.set(s.progress,{scaleX:0}),t.active=!0,t.from=a;const{element:n}=a,d=r.position;n.style.cssText=["position:fixed","width:var(--100vw)",`top:${-1*d}px`,"left:0","background-color:#fff","z-index: 1"].join(";"),n.setAttribute("inert",!0),n.style.removeProperty("--shade",0),n.style.removeProperty("--shade-color"),e.to(a.element,{duration:.5,ease:"power1.out","--shade":.5,immediateRender:!0}),e.to(s.progress,{duration:1,ease:"power2.inOut",scaleX:.12,immediateRender:!0}),o.value&&o.value.on()}async function p(a){t.to=a;const n=new R,{loader:d}=a,l=t.to.element,g=l.firstElementChild,_=t.from.element;return l.style.contain="paint",e.set(l,{y:()=>window.vh(100)}),e.set(g,{y:()=>window.vh(-90)}),await y(1),await d.mounted,e.killTweensOf(s.progress),e.to(s.progress,{duration:.6,ease:"power2.out",scaleX:.33}),l.style.setProperty("--shade-color","#F73B20"),await d.loaded,e.killTweensOf([s.progress,_]),e.to(s.progress,{duration:.5,ease:"power2.out",scaleX:1}),await y(150),y(200).then(()=>t.active=!1),y(400).then(()=>a.loader.dispatch("ready")),l.style.setProperty("--shade",1),_.style.zIndex="-1",e.to(_,{duration:1.2,ease:"power2.in",y:()=>window.vh(-5)}),o.value&&o.value.off(),await Promise.all([x(e.to(_,{duration:.5,ease:"power2.in","--shade":.66})),x(e.to([l,g],{duration:1.2,ease:"power4.inOut",y:0})),x(e.to(l,{duration:.45,delay:.1,ease:"power1.in","--shade":0}))]),e.set(l,{clearProps:"all"}),e.set(g,{clearProps:"all"}),n.resolve(),r.resize(),m(),n.promise}function m(){t.from&&(e.killTweensOf(t.from.element),t.from=null),t.to&&(e.killTweensOf(t.to.element),t.to.element.style.contain=null,t.to=null),t.active=!1,e.killTweensOf(s.progress),e.set(s.progress,{scaleX:0})}return(a,n)=>{const d=N,l=E("prevent-scroll");return v(),h(M,null,[S((v(),h("div",{ref_key:"root",ref:u,class:"_page-transition",inert:!t.active},W,8,q)),[[l]]),V(d,null,{default:z(()=>[T(i).touch?L("",!0):(v(),F(T(I),{key:0,ref_key:"cursor",ref:o},null,512))]),_:1})],64)}}};export{H as default};
