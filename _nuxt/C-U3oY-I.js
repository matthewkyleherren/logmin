import{a9 as $,aa as j,d as _,e as y,l as b,n as l,f as n,ab as B,a7 as M,c as p,ac as U,ad as S,r as E,x as O,m as C,A as x,k as D,ae as N,af as g}from"./RIBstFtf.js";import{_ as G}from"./BZdUWrnT.js";const I={class:"_currency-card"},P={class:"slot subhead-2 -medium color-orange-900"},w={__name:"CurrencyCard",props:$({initialValue:{type:String,default:void 0},disable:{type:Array,default:()=>[]}},{modelValue:{type:Object,default:void 0},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const s=j(d,"modelValue");return(e,o)=>(_(),y("div",I,[b(l(G),{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=u=>s.value=u),"initial-value":d.initialValue,disable:d.disable},null,8,["modelValue","initial-value","disable"]),n("div",P,[B(e.$slots,"default",{currency:s.value})])]))}};function T(){const d=M();let s={};const e=p(!1),o=p(!1),u=p([]),h=p(null);U(()=>{fetch("/api/currency-rates").then(a=>a.json()).then(a=>{if(a.updatedAt)s=a.value,h.value=a.updatedAt,u.value=d.filter(({code:r})=>!m(r)).map(({code:r})=>r),e.value=!0;else throw new Error("Unable to use data")}).catch(a=>{console.error(a),e.value=!0,o.value=!0})});function m(a){return Object.hasOwn(s,a)}function V(a,r,c){return!a||o.value||!e.value||!m(r)||!m(c)?"0":S(a/s[r].value*s[c].value,3).toString().replaceAll(".",",")}return{ready:e,error:o,updatedAt:h,unsupportedCurrencyCodes:u,convert:V}}const q={class:"_currency-converter flex flex-col gap-8"},z={class:"input-container relative flex gap-4 items-center"},F={class:"whitespace-nowrap"},H=n("span",{class:"input-focus absolute","aria-hidden":"true",inert:""},null,-1),J=["data-swapped"],K={key:0,class:"flex justify-center items-center gap-4"},L=n("div",{class:"body -book"},"Error",-1),Q=[L],R={key:1,class:"flex gap-4 items-center"},W={key:2,class:"flex justify-center items-center gap-4"},Z={__name:"CurrencyConverter",setup(d,{expose:s}){const e=E({from:null,to:null}),{convert:o,ready:u,error:h,updatedAt:m,unsupportedCurrencyCodes:V}=T();s({updatedAt:m});const a=p(10),r=O(()=>{var f,t;return u.value&&o(a.value,(f=e.from)==null?void 0:f.value,(t=e.to)==null?void 0:t.value)}),c=p(!1);function k(){const{from:f,to:t}={...e};e.from=t,e.to=f,c.value=!c.value}return(f,t)=>(_(),y("div",q,[b(l(w),{modelValue:e.from,"onUpdate:modelValue":t[1]||(t[1]=i=>e.from=i),disable:l(V)},{default:C(i=>{var v;return[n("div",z,[n("div",F,x((v=i.currency)==null?void 0:v.symbol),1),D(n("input",{"onUpdate:modelValue":t[0]||(t[0]=A=>a.value=A),type:"number",min:"0",max:"100000",placeholder:"100",class:"grow"},null,512),[[N,a.value,void 0,{number:!0}]]),H])]}),_:1},8,["modelValue","disable"]),n("button",{class:"swap-btn mx-auto","data-hitarea":"","aria-label":"swap button","data-swapped":c.value,onClick:k},[b(l(g),{name:"exchange"})],8,J),b(l(w),{modelValue:e.to,"onUpdate:modelValue":t[2]||(t[2]=i=>e.to=i),"initial-value":"GBP",disable:l(V)},{default:C(i=>{var v;return[l(h)?(_(),y("div",K,Q)):l(u)?(_(),y("div",R,[n("span",null,x((v=i.currency)==null?void 0:v.symbol),1),n("span",null,x(r.value),1)])):(_(),y("div",W,[b(l(g),{class:"icon-orange-900",name:"loading"})]))]}),_:1},8,["modelValue","disable"])]))}};export{Z as _};
