import{c as y,u as F,i as R,o as T,w as N,g as S,d as M,e as V,F as X,E as z,f as p,ai as G,A as u,n as _,a8 as H,ao as J,ap as I,V as x,x as K,a5 as Q,a as Y,j as Z,k as ee,l as d,m as v,G as g,B as te}from"./RIBstFtf.js";import{_ as q}from"./CSsqV-R-.js";const se=["data-active","onClick"],ae={class:"flex items-baseline"},ne={class:"index -book flex place-center"},ie=p("circle",{cx:"12",cy:"12",r:"12"},null,-1),oe=p("circle",{cx:"12",cy:"12",r:"12"},null,-1),re=[ie,oe],le={class:"label -medium"},ce={class:"pl-8"},pe={__name:"Stepper",props:{steps:{type:Array,required:!0}},emits:["seek"],setup(e,{expose:t,emit:a}){const f=e,s=a;t({update:C});const o=y(null),h=F(o,{labels:[".label"]}),k=R(),m=y(0),b=y(new Array(f.steps.length).fill(0));T($),N(k,$);function $(){for(let n=0;n<h.labels.length;n++){const i=h.labels[n];i.style.setProperty("--w",`${i.firstElementChild.offsetWidth}px`)}}N(m,function(n){for(let i=0;i<h.labels.length;i++){const c=h.labels[i].parentElement;i<=n?S.set(c,{opacity:1}):(S.set(c,{opacity:.5}),b.value[i]=0)}});function C(n,i){if(n>=0){m.value=n;for(let c=0;c<n;c++)b.value[c]=1;b.value[n]=i}}function E(n){s("seek",n)}return(n,i)=>(M(),V("ul",{ref_key:"root",ref:o,class:"_stepper body-small flex gap-16 color-white"},[(M(!0),V(X,null,z(e.steps,(c,r)=>(M(),V("li",{key:r},[p("button",{class:"shrink-0","data-hitarea":"","data-active":m.value===r,onClick:w=>E(r)},[p("div",ae,[p("div",ne,[(M(),V("svg",{class:"absolute inset-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:G(`--p:${b.value[r]}`)},re,4)),p("span",null,u(_(H)(r+1)),1)]),p("div",le,[p("div",ce,u(c.label),1)])])],8,se)]))),128))],512))}};function A(e){return!e||e[0]==="+"||e[0]==="-"?I()+(e??""):e}const l={heading:{enter:function(e,t,a){e.from(t,{duration:.6,ease:"power2.out",opacity:0,y:20},a)},leave:function(e,t,a){e.to(t,{duration:.5,ease:"power2.in",opacity:0,y:-20},a)}},feature:{enter:function(e,t,a){a=A(a),e.from(t.querySelector(".divider"),{duration:.9,ease:"power2",scaleX:0},a),e.from(t.querySelectorAll("p"),{duration:.6,delay:.1,stagger:.1,ease:"power2",opacity:0,y:20},a)},leave:function(e,t,a){a=A(a),e.to(t.querySelector(".divider"),{duration:.4,ease:"power2.in",scaleX:0,y:-20},a),e.to(t.querySelectorAll("p"),{duration:.4,delay:.05,stagger:.05,ease:"power2.in",opacity:0,y:-20},a)}},rive:function(e,t,a){a=A(a);const f={progress:0},s=t.instance.animationNames[0],[o,h]=ue(t);e.to(f,{duration:o,ease:"none",progress:1,onUpdate:()=>t.instance.scrub(s,h+f.progress*o)},a)}};async function de(e,t,{onUpdate:a}){let f=[];await Promise.all(Object.entries(t).map(([,r])=>r.loaded));const s=S.timeline({paused:!0,onUpdate(){a(f,this)}}),o=S.timeline();s.set(e.fragments,{opacity:1},0),s.add(o,"step-1"),s.set(t.step1.canvas,{opacity:1},"step-1"),l.rive(o,t.step1,"a"),l.heading.enter(o,e.step1.heading1,"a+=0.1"),l.heading.leave(o,e.step1.heading1,"a+=1.55"),l.heading.enter(o,e.step1.heading2,"a+=2.2"),l.heading.leave(o,e.step1.heading2,"a+=3.45"),l.feature.enter(o,e.step1.feature1,"a+=3.9"),l.feature.leave(o,e.step1.feature1,"a+=6");const h=S.timeline();s.add(h,"step-2"),s.set(t.step1.canvas,{opacity:0},"step-2"),s.set(t.step2.canvas,{opacity:1},"step-2"),l.rive(o,t.step2,"b"),l.feature.enter(h,e.step2.feature1,"b+=0.5"),l.feature.leave(h,e.step2.feature1,"b+=6");const k=S.timeline();s.add(k,"step-3"),s.set(t.step2.canvas,{opacity:0},"step-3"),s.set(t.step3.canvas,{opacity:1},"step-3"),l.rive(o,t.step3,"c"),l.feature.enter(k,e.step3.feature1,"c+=0"),l.feature.leave(k,e.step3.feature1,"c+=2.6");const m=S.timeline();s.add(m,"step-4"),s.set(t.step3.canvas,{opacity:0},"step-4"),s.set(t.step4.canvas,{opacity:1},"step-4"),l.rive(o,t.step4,"d"),l.feature.enter(m,e.step4.feature1,"d+=0.1"),l.feature.leave(m,e.step4.feature1,"d+=2.6");const b=S.timeline();s.add(b,"step-5"),s.set(t.step4.canvas,{opacity:0},"step-5"),s.set(t.step5.canvas,{opacity:1},"step-5"),l.rive(o,t.step5,"e"),l.heading.enter(b,e.step5.subheadingMobile,"e+=0.6"),l.heading.enter(b,e.step5.subheading1,"e+=0.6"),l.heading.enter(b,e.step5.subheading2,"e+=0.9"),s.from(e.restart,{duration:1,ease:"power3",opacity:0,y:20,pointerEvents:"none"},"+=1"),f=$();function $(){const r=s.duration();return Object.entries(s.labels).map(([w,W],U,D)=>{const L=W/r,P=(U<D.length-1?D[U+1][1]:r)/r;return{name:w,get current(){return w===s.currentLabel()},get progress(){return J((s.progress()-L)/(P-L),0,1)}}})}function C(){s.play()}function E(){s.pause()}function n(r){const w=f[r];w&&s.seek(w.name)}function i(){s.seek(0).play()}function c(){s.kill()}return{seek:n,play:C,pause:E,restart:i,destroy:c}}function ue(e){const{instance:t}=e,a=t.animator.animations[0].animation,f=(a.workEnd-a.workStart)/a.fps-.01,s=f*a.workStart/(a.workEnd-a.workStart);return[f,s]}const fe={class:"absolute inset-0 grid place-center overflow-hidden"},he={class:"rives relative grid place-center"},ve={"data-step":"1"},ge={"data-step":"2"},be={"data-step":"3"},ye={"data-step":"4"},me={"data-step":"5"},ke={class:"stepper"},we={class:"restart"};function O(e,{slots:t}){return x("div",{class:"heading title-3 xs-title-5 text-center"},[x("p",{},t)])}function B(e,{slots:t}){return x("div",{class:"subheading title-5 xs-subhead-1","data-position":e.position??"left"},[x("p",{class:"grow"},t)])}function j(e,{slots:t}){return x("div",{class:"feature","data-position":e.position??"left"},[x("div",{class:"divider"}),x("p",{class:"title subhead-1 xs-subhead-2 mb-8"},t.title()),x("p",{class:"text body"},t.description())])}const xe={__name:"JetonWalkthrough",props:{steps:{type:Object,required:!0}},setup(e){const t=e,a=y(null),f=y(null),s=y(null),[o,h,k,m,b]=[y(null),y(null),y(null),y(null),y(null)],$=F(a,{step1:{heading1:'[data-step="1"] > *:nth-child(1)',heading2:'[data-step="1"] > *:nth-child(2)',feature1:'[data-step="1"] > *:nth-child(3)'},step2:{feature1:'[data-step="2"] > *:nth-child(1)',fallbackMedia1:'[data-step="2"] > *:nth-child(2)'},step3:{feature1:'[data-step="3"] > *:nth-child(1)',fallbackMedia1:'[data-step="3"] > *:nth-child(2)'},step4:{feature1:'[data-step="4"] > *:nth-child(1)',fallbackMedia1:'[data-step="4"] > *:nth-child(2)'},step5:{subheading1:'[data-step="5"] > *:nth-child(1)',subheading2:'[data-step="5"] > *:nth-child(2)',subheadingMobile:'[data-step="5"] > *:nth-child(3)'},restart:"._button",fragments:["article, .restart"]}),C=K(()=>{const{account:n,deposit:i,method:c,review:r,done:w}=t.steps;return[{label:n.title},{label:i.title},{label:c.title},{label:r.title},{label:w.title}]});T(async()=>{let n=null;const i={step1:o.value,step2:h.value,step3:k.value,step4:m.value,step5:b.value};de($,i,{onUpdate:E}).then(c=>{s.value=c,n=Q(a.value,r=>{s.value&&s.value[r?"play":"pause"]()})}),Y(()=>{s.value&&s.value.destroy(),n&&n.destroy()})});function E(n){if(f.value){const i=n.findIndex(({current:r})=>r===!0),c=n[i].progress;f.value.update(i,c)}}return(n,i)=>{const c=Z("scroll-snap");return ee((M(),V("section",{ref_key:"root",ref:a,class:"_jeton-walkthrough w-full background-orange"},[p("div",fe,[p("div",he,[d(_(q),{ref_key:"riveStep1",ref:o,asset:e.steps.account.animation},null,8,["asset"]),d(_(q),{ref_key:"riveStep2",ref:h,asset:e.steps.deposit.animation},null,8,["asset"]),d(_(q),{ref_key:"riveStep3",ref:k,asset:e.steps.method.animation},null,8,["asset"]),d(_(q),{ref_key:"riveStep4",ref:m,asset:e.steps.review.animation},null,8,["asset"]),d(_(q),{ref_key:"riveStep5",ref:b,asset:e.steps.done.animation},null,8,["asset"])])]),p("article",ve,[d(O,null,{default:v(()=>[g(u(e.steps.account.heading1),1)]),_:1}),d(O,null,{default:v(()=>[g(u(e.steps.account.heading2),1)]),_:1}),d(j,{position:"left"},{title:v(()=>[g(u(e.steps.account.feature1.title),1)]),description:v(()=>[g(u(e.steps.account.feature1.description),1)]),_:1})]),p("article",ge,[d(j,{position:"right"},{title:v(()=>[g(u(e.steps.deposit.feature1.title),1)]),description:v(()=>[g(u(e.steps.deposit.feature1.description),1)]),_:1})]),p("article",be,[d(j,{position:"left"},{title:v(()=>[g(u(e.steps.method.feature1.title),1)]),description:v(()=>[g(u(e.steps.method.feature1.description),1)]),_:1})]),p("article",ye,[d(j,{position:"right"},{title:v(()=>[g(u(e.steps.review.feature1.title),1)]),description:v(()=>[g(u(e.steps.review.feature1.description),1)]),_:1})]),p("article",me,[d(B,{position:"left"},{default:v(()=>[g(u(e.steps.done.subheading1),1)]),_:1}),d(B,{position:"right"},{default:v(()=>[g(u(e.steps.done.subheading2),1)]),_:1}),d(B,{position:"center"},{default:v(()=>[g(u(e.steps.done.subheading1)+", "+u(e.steps.done.subheading2),1)]),_:1})]),p("div",ke,[d(_(pe),{ref_key:"stepper",ref:f,steps:C.value,onSeek:i[0]||(i[0]=r=>s.value.seek(r))},null,8,["steps"])]),p("div",we,[d(_(te),{icon:"restart",label:e.steps.done.done_restart?e.steps.done.done_restart:"Restart",variant:"outline",tabindex:"-1",onClick:i[1]||(i[1]=()=>s.value.restart())},null,8,["label"])])])),[[c]])}}};export{j as Feature,O as Heading,B as Subheading,xe as default};
