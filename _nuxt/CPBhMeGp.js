import{az as D,V as o,d as $,p as C,n as M,ak as q,B,W as E}from"./RIBstFtf.js";function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(n){K(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K(e,t,r){return t=R(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){var t=z(e,"string");return typeof t=="symbol"?t:t+""}function z(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b(e){return e._type==="span"&&"text"in e&&typeof e.text=="string"&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every(t=>typeof t=="string"))}function P(e){return typeof e._type=="string"&&e._type[0]!=="@"&&(!("markDefs"in e)||!e.markDefs||Array.isArray(e.markDefs)&&e.markDefs.every(t=>typeof t._key=="string"))&&"children"in e&&Array.isArray(e.children)&&e.children.every(t=>typeof t=="object"&&"_type"in t)}function I(e){return P(e)&&"listItem"in e&&typeof e.listItem=="string"&&(typeof e.level>"u"||typeof e.level=="number")}function S(e){return e._type==="@list"}function F(e){return e._type==="@span"}function H(e){return e._type==="@text"}const w=["strong","em","code","underline","strike-through"];function U(e,t,r){if(!b(e)||!e.marks)return[];if(!e.marks.length)return[];const n=e.marks.slice(),i={};return n.forEach(s=>{i[s]=1;for(let l=t+1;l<r.length;l++){const c=r[l];if(c&&b(c)&&Array.isArray(c.marks)&&c.marks.indexOf(s)!==-1)i[s]++;else break}}),n.sort((s,l)=>G(i,s,l))}function G(e,t,r){const n=e[t],i=e[r];if(n!==i)return i-n;const s=w.indexOf(t),l=w.indexOf(r);return s!==l?s-l:t.localeCompare(r)}function j(e){var t;const{children:r,markDefs:n=[]}=e;if(!r||!r.length)return[];const i=r.map(U),s={_type:"@span",children:[],markType:"<unknown>"};let l=[s];for(let c=0;c<r.length;c++){const f=r[c];if(!f)continue;const a=i[c]||[];let d=1;if(l.length>1)for(d;d<l.length;d++){const h=((t=l[d])==null?void 0:t.markKey)||"",u=a.indexOf(h);if(u===-1)break;a.splice(u,1)}l=l.slice(0,d);let p=l[l.length-1];if(p){for(const h of a){const u=n.find(A=>A._key===h),L=u?u._type:h,v={_type:"@span",_key:f._key,children:[],markDef:u,markType:L,markKey:h};p.children.push(v),l.push(v),p=v}if(b(f)){const h=f.text.split(`
`);for(let u=h.length;u-- >1;)h.splice(u,0,`
`);p.children=p.children.concat(h.map(u=>({_type:"@text",text:u})))}else p.children=p.children.concat(f)}}return s.children}function N(e,t){const r=[];let n;for(let i=0;i<e.length;i++){const s=e[i];if(s){if(!I(s)){r.push(s),n=void 0;continue}if(!n){n=m(s,i,t),r.push(n);continue}if(W(s,n)){n.children.push(s);continue}if((s.level||1)>n.level){const l=m(s,i,t);if(t==="html"){const c=n.children[n.children.length-1],f=O(O({},c),{},{children:[...c.children,l]});n.children[n.children.length-1]=f}else n.children.push(l);n=l;continue}if((s.level||1)<n.level){const l=r[r.length-1],c=l&&g(l,s);if(c){n=c,n.children.push(s);continue}n=m(s,i,t),r.push(n);continue}if(s.listItem!==n.listItem){const l=r[r.length-1],c=l&&g(l,{level:s.level||1});if(c&&c.listItem===s.listItem){n=c,n.children.push(s);continue}else{n=m(s,i,t),r.push(n);continue}}console.warn("Unknown state encountered for block",s),r.push(s)}}return r}function W(e,t){return(e.level||1)===t.level&&e.listItem===t.listItem}function m(e,t,r){return{_type:"@list",_key:`${e._key||`${t}`}-parent`,mode:r,level:e.level||1,listItem:e.listItem,children:[e]}}function g(e,t){const r=t.level||1,n=t.listItem||"normal",i=typeof t.listItem=="string";if(S(e)&&(e.level||1)===r&&i&&(e.listItem||"normal")===n)return e;if(!("children"in e))return;const s=e.children[e.children.length-1];return s&&!b(s)?g(s,t):void 0}const V={marks:{strong:"strong",em:"em",code:"code",link:({props:e,children:t})=>o("a",{attrs:{href:e.href,target:"_blank"}},t),default:"span",text:null},styles:{default:"div",normal:"p",blockquote:"blockquote",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"},list:{bullet:"ul",number:"ol"},listItem:"li",types:{}};function J(e){return e instanceof Function}function y(e,t){if(J(e))return e(t);{const r={...t};return r.children&&delete r.children,r.node&&delete r.node,o(e,r||{},t.children)}}function Q(e,t,r){const n=j(e).map(l=>r(l,t,r)),{style:i}=e,s=t.styles[i]||t.styles.default;return y(s,{node:e,children:n})}function X(e,t,r){const n=e.children.map(c=>r(c,t,r)),{markType:i,markDef:s}=e,l=t.marks[i]||t.marks.default;return y(l,{node:e,props:s,children:n})}function Y(e,t,r){const n=e.children.map(s=>r(s,t,r)),i=t.list[e.listItem]||"ul";return y(i,{node:e,children:n})}function Z(e,t){const r=j(e).map(l=>k(l,t,k)),{style:n}=e,i=t.styles[n]||t.styles.default,s=t.listItem;return i==="p"?y(s,{node:e,children:r}):y(s,{node:e,children:[y(i,{node:e,children:r})]})}function ee(e,t){return e.text===`
`?o("br"):t.marks.text?y(t.marks.text,{node:e,children:e.text}):e.text}function te(e,t){const r=t.types[e._type];return o(r,{props:e})}function k(e,t,r){if(S(e))return Y(e,t,r);if(I(e))return Z(e,t);if(F(e))return X(e,t,r);if(P(e))return Q(e,t,r);if(H(e))return ee(e,t);if(t.types[e._type])return te(e,t);console.warn(`[PortableText] No renderer for type "${e._type}"`)}function re(e,t,r){const n=N(e);return o(r,{attrs:{"data-portable-text":""}},n.map(i=>k(i,t,k)))}const ne={props:{blocks:{type:Array,default:()=>[]},components:{type:Object,default:()=>({})},as:{type:String,default:"div"}},setup(e){const t=D(e.components,V);return()=>re(e.blocks,t,e.as)}},he={__name:"RichText",props:{blocks:{type:Array,required:!0}},setup(e){const t={styles:{h2:"h2",h3:"h3"},marks:{link:({props:r,children:n})=>o(q,{to:r.link},()=>n)},types:{cta:function({props:r}){return o(B,{label:r.label,tone:"orange",variant:"secondary",icon:"download"})},table:function({props:r}){return o(ue,{rows:r.rows})},figure:function({props:r}){return o("figure",{},[o(E,{asset:r.asset,skeleton:!0,sizes:"xl:100vw md:100vw sm:100vw xs:100vw xxs:100vw"})])}}};return(r,n)=>($(),C(M(ne),{class:"_rich-text",blocks:e.blocks,components:t},null,8,["blocks"]))}},T={group:{head:"thead",body:"tbody",default:"tbody"},row:{default:"tr"},cell:{head:"th",header:"th",body:"td",default:"td"}};function _(e,t){return T[e][t]||T[e].default}function se(e){let t=-1;function r(n,i){const{type:s}=i;return s==="head"&&n.push({role:"head",rows:[{role:"head",cells:i.cells}]}),s==="body"&&(t<0&&(n.push({role:"body",rows:[]}),t=n.length-1),n[t].rows.push({role:"body",cells:i.cells})),s==="header"&&(n.push({role:"body",rows:[{role:"header",style:i.style,cells:i.cells}]}),t=n.length-1),n}return e.reduce(r,[])}function ie(e,t){const r=_("cell",t.role),n={};return t.role==="head"&&(n.role="columnheader"),t.role==="header"?(n.scope="rowgroup",n.colspan="100%",o(r,n,e)):o(r,n,[e])}function le(e,t,r){const n=_("row",e.role),i={};return e.role==="header"&&(i["data-role"]="header"),o(n,i,e.cells.map(s=>ie(s,e)))}function ce(e,t){const r=_("group",e.role),n={};return e.rows[0].role==="header"&&(n["data-header"]=!0),o(r,n,e.rows.map(i=>le(i)))}function oe(e){return o("div",{class:"s-thead","aria-hidden":!0},e.rows.map(({cells:t})=>o("div",{role:"tr"},t.map(r=>o("div",{role:"th"},r)))))}function ae(e){const t=se(e),r=Math.max(...e.map(({cells:i})=>i.length)),n=t[0].role==="head"?t[0]:null;return o("div",{class:"_table"},[n?oe(n):[],o("div",{class:"table-container"},o("table",{style:`--columns: ${r}`},t.map(i=>ce(i))))])}const ue={props:{rows:{type:Array,required:!0}},setup(e){return()=>ae(e.rows)},data(){return{instance:{}}},beforeUnmount(){this.instance.destroy&&this.instance.destroy()},mounted(){var t;const e=this.$el.querySelector(".s-thead");if(e){let c=function(){const a=r.scrollLeft;i.style.transform=`translate3d(${-1*a}px, 0, 0)`},f=function(){for(let a=0;a<n.length;a++)s[a].style.width=n[a].offsetWidth+"px"};const r=this.$el.querySelector(".table-container"),n=(t=[...r.querySelectorAll("tbody > tr")].find(a=>!a.hasAttribute("data-role")))==null?void 0:t.children,i=e.querySelector('[role="tr"]'),s=[...i.querySelectorAll('[role="th"]')];r.addEventListener("scroll",c,{passive:!0});const l=new ResizeObserver(f);l.observe(r),this.instance.destroy=function(){l.disconnect()}}}};export{he as _};
